<!docytpe html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name = "viewport" content="width=device-width, initial-scale=1.0">
        <link href="/assets/img/favicon.png" rel="shortcut icon">
        <link href="/assets/css/style.css" rel="stylesheet">
        <link href="/assets/css/code.css" rel="stylesheet" />
        <link href="/assets/css/katex.min.css" rel="stylesheet"/>
        <title>ChatGPT in the terminal</title>
    </head>
    <body>
        <div class="titlecard">
            <a href="/">~/</a> | <a href="/feed.xml">rss</a>
        </div>
        <h1>ChatGPT in the terminal</h1>
<div>
    2023 01 03 
    
    <a href="/tags/ai">#ai</a>
    
    <a href="/tags/python">#python</a>
    
</div>
<p>Currently OpenAI offers python or node bindings, this uses python to pull results directly to the terminal vs having to use their web interface. I'm more familiar with python's libraries for analysis, so here we are.</p>
<p>Be advised that you need a valid api key to access their models. <a href="https://github.com/canaanmckenzie/ChatGPT_cmd">Source</a>.</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">import</span> openai<br><span class="token keyword">import</span> argparse<br><br><span class="token comment">#set up openAI api Key</span><br>openai<span class="token punctuation">.</span>api_key <span class="token operator">=</span> <span class="token string">"API_KEY"</span><br><br><span class="token comment">#generate ai response</span><br><span class="token keyword">def</span> <span class="token function">generate_response</span><span class="token punctuation">(</span>prompt<span class="token punctuation">,</span>model<span class="token punctuation">,</span>temperature<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>    response <span class="token operator">=</span> openai<span class="token punctuation">.</span>Completion<span class="token punctuation">.</span>create<span class="token punctuation">(</span><br>        engine <span class="token operator">=</span> model<span class="token punctuation">,</span><br>        prompt<span class="token operator">=</span>prompt<span class="token punctuation">,</span><br>        max_tokens<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span><br>        temperature <span class="token operator">=</span> temperature<span class="token punctuation">,</span><br>        n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><br>        stop<span class="token operator">=</span><span class="token boolean">None</span><br>    <span class="token punctuation">)</span><br>    <span class="token keyword">return</span> response<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token comment">#define command line args</span><br>parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">'Generate AI response from OpenAI API'</span><span class="token punctuation">)</span><br><br>parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--model'</span><span class="token punctuation">,</span> metavar<span class="token operator">=</span><span class="token string">'MODEL'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'davinci'</span><span class="token punctuation">,</span> <br>    <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'The Name of the OpenAI model to use (default: davinci)'</span><span class="token punctuation">)</span><br><br>parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--temperature'</span><span class="token punctuation">,</span> metavar<span class="token operator">=</span><span class="token string">'TEMP'</span><span class="token punctuation">,</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">,</span>default<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> <br>    <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'The sampling temperature to use (default: 0.5)'</span><span class="token punctuation">)</span><br><br>parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'prompt'</span><span class="token punctuation">,</span>metavar<span class="token operator">=</span><span class="token string">'PROMPT'</span><span class="token punctuation">,</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span><br>    <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'The prompt to use fro generating AI response'</span><span class="token punctuation">)</span><br><br><span class="token comment">#parse cmd-line args</span><br>args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token comment">#gen response and print it</span><br>response <span class="token operator">=</span> generate_response<span class="token punctuation">(</span>args<span class="token punctuation">.</span>prompt<span class="token punctuation">,</span> args<span class="token punctuation">.</span>model<span class="token punctuation">,</span> args<span class="token punctuation">.</span>temperature<span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span></code></pre>

</html>